<form name="form" novalidate><div id="myProfile" class="sw-container"><h1 class="mainHeading" ng-show="showUsername"><translate>New User</translate></h1><h1 class="mainHeading" ng-show="!showUsername"><translate>Edit User</translate></h1><div><div class="form-group"><div class="col-sm-8"><div ng-if="showUsername"class="row"><input  fl-labelname="username"placeholder="{{'Username' | translate}}"maxlength="100"requiredsw-username-validatorng-model="objProfileData.username"><div ng-messages="form.username.$error"ng-if="form.username.$touched"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div ng-if="!exceptions.first_name"class="row"><input  fl-labelname="firstName"requiredplaceholder="{{'First Name' | translate}}"maxlength="100"ng-model="objProfileData.firstName"><div ng-messages="form.firstName.$error"ng-if="form.firstName.$touched"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div ng-if="!exceptions.last_name"class="row"><input  fl-labelname="lastName"requiredplaceholder="{{'Last Name' | translate}}"maxlength="100"ng-model="objProfileData.lastName"><div ng-messages="form.lastName.$error"ng-if="form.lastName.$touched"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div ng-if="!exceptions.email"class="row"><input  fl-labelname="email"type="email"requiredplaceholder="{{'Email' | translate}}"maxlength="200"ng-model="objProfileData.email"><div ng-messages="form.email.$error"ng-if="form.email.$touched"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div ng-if="!exceptions.passport"class="row"><input  fl-labelname="passport"placeholder="{{'Passport Number' | translate}}"ng-model="objProfileData.passport"></div></div><div class="col-sm-4"><sw-file-uploadpath="/swapp/directives/"name="profilepicture"class="profilepicture"ng-class="{'empty': !objProfileData.profilepicture}"init-src="{{objProfileData.profilepicture}}"height="270"width="272"ng-mouseenter="mouseoverProfilePic=true"ng-mouseleave="mouseoverProfilePic=false"ng-class="{ 'mouseover': mouseoverProfilePic}"></sw-file-upload><span class="sw-profile-pic-description"ng-mouseenter="mouseoverProfilePic=true"ng-mouseleave="mouseoverProfilePic=false"ng-class="{ 'mouseover': mouseoverProfilePic}"><span class="sw-profile-pic-text"><span class="glyphicon glyphicon-camera"></span><translate>Upload Profile Picture</translate></span></span></div></div><div class="clearfix line"></div><div><div ng-if="!exceptions.mobile"><input  fl-labelname="mobile"placeholder="{{'Mobile' | translate}}"maxlength="100"ng-model="objProfileData.mobile"></div><div ng-if="!exceptions.skype"><input  fl-labelname="mobile"placeholder="{{'Skype' | translate}}"maxlength="100"ng-model="objProfileData.skype"></div><div ng-if="!exceptions.linkedIn"><input  fl-labelname="linkedin"placeholder="{{'LinkedIn' | translate}}"maxlength="200"ng-model="objProfileData.linkedin"></div><div ng-if="!exceptions.twitter"><input  fl-labelname="twitter"placeholder="{{'Twitter' | translate}}"maxlength="200"ng-model="objProfileData.twitter"></div><div ng-if="!exceptions.facebook"><input  fl-labelname="facebook"placeholder="{{'Facebook' | translate}}"maxlength="200"ng-model="objProfileData.facebook"></div></div><div class="clearfix line"></div><div class="row" ng-if="!exceptions.mfMyProfileSecuritySettings"><h2 translate>Security Settings</h2><div class="col-sm-12"><div class="col-sm-12 searchfilter" ng-if="!canEditSecuritySettings"><span class="glyphicon glyphicon-info-sign"></span><translate>These settings can only be changed by a system administrator.</translate></div></div><div class="col-sm-12" ng-if="!exceptions.mfMyProfileJobTitle"><select fl-selectfl-lead="Job Title"fl-tip="Job Title"ng-model="objProfileData.jobTitle"ng-change="objProfileData.jobTitleChanged=true"ng-disabled="!canEditSecuritySettings"><option ng-repeat="job in objProfileData.jobTitleList"value="{{job.bcmPositionid}}">{{job.title}}</option></select></div><div class="col-sm-12" ng-if="!exceptions.mfMyProfileDepartment"><select fl-selectfl-lead="Department"fl-tip="Department"ng-model="objProfileData.bcmBUnitid"ng-change="objProfileData.deptChanged=true"ng-disabled="!canEditSecuritySettings"><option ng-repeat="dept in objProfileData.departmentList" value="{{dept.bcmBUnitid}}">{{dept.unitName}}</option></select></div><div class="col-sm-4" ng-if="!exceptions.mfMyProfileMyCommunityAccess"><label class="control-label"><translate>Mycommunity Access</translate></label></div><div class="col-sm-8" ng-if="!exceptions.mfMyProfileMyCommunityAccess"><div class="row"><div><div class="col-sm-4"><input  type="checkbox"fl-checkng-model="objProfileData.accessPortal"ng-disabled="!canEditSecuritySettings"label="{{'Portal Access' | translate}}"></div><div class="col-sm-8"><input  type="checkbox"fl-checkng-model="objProfileData.editPortal"ng-disabled="!canEditSecuritySettings"label="{{'Edit Portal Access' | translate}}"></div></div></div></div><div class="clearfix"></div><div ng-switch on="objProfileData.totalPropertyCount == objProfileData.propertyAccessCount"><div class="col-sm-12"ng-switch-when="true"ng-if="!exceptions.mfMyProfilePropertyAccessLine && !canEditSecuritySettings"><translate>You have access to all properties managed by <strong>{{objProfileData.companyName}}</strong></translate></div><div class="col-sm-12"ng-switch-when="false"ng-if="!exceptions.propertyAccessCount && !canEditSecuritySettings"><strong><translate>You have access to {{objProfileData.propertyAccessCount}} properties</translate></strong></div><div class="col-sm-12"><div class="panel panel-default" ng-if="canEditSecuritySettings"><div ng-click="securityDropdown=!securityDropdown"class="panel-heading"><span class="fl-frm__lbl-txt" translate>Property Access</span><translate>You have access to</translate><i  class="glyphicon pull-right"ng-class="{ 'glyphicon-chevron-down': securityDropdown, 'glyphicon-chevron-right': !securityDropdown }"></i></div><div class="panel-body"ng-show="securityDropdown"><div class="search-suggestion-item"><label><input type="checkbox" ng-model="objProfileData.selectAll" ng-change="selectAll()" /><translate>Select All</translate></label></div><div ng-repeat="property in objProfileData.propertyAccessList track by $index" class="search-suggestion-item"><label><input type="checkbox" ng-checked="property.sel" /> {{property.nam}}</label></div></div></div></div><div ng-if="!canEditSecuritySettings"><div ng-repeat="property in objProfileData.propertyAccessList track by $index" ng-if="property.sel">{{property.nam}}</div></div></div></div><div class="clearfix line"></div><div class="form-group"><h2 translate>System generated tasks</h2><div class="col-sm-4" ng-if="!exceptions.mfMyProfileNotificationSettings"><input  type="checkbox"fl-checkng-model="objProfileData.notificationSettings.systemTaskCheck"ng-change="notificationsUpdated()"label="{{'System generated tasks' | translate}}"></div><div class="col-sm-8" ng-if="!exceptions.mfMyProfileEmail"><input  fl-labelplaceholder="{{'Email' | translate}}"maxlength="100"ng-model="objProfileData.notificationSettings.systemTaskEmail"ng-disabled="!objProfileData.notificationSettings.systemTaskCheck"ng-change="notificationsUpdated()"></div><div class="col-sm-4" ng-if="!exceptions.mfMyProfileUst"><input  type="checkbox"fl-checkng-model="objProfileData.notificationSettings.userTaskCheck"ng-change="notificationsUpdated()"label="{{'User Created Tasks' | translate}}"></div><div class="col-sm-8" ng-if="!exceptions.mfMyProfileEmail"><input  fl-labelplaceholder="{{'Email' | translate}}"maxlength="100"ng-model="objProfileData.notificationSettings.userTaskEmail"ng-disabled="!objProfileData.notificationSettings.userTaskCheck"ng-change="notificationsUpdated()"></div><div class="col-sm-4" ng-if="!exceptions.mfMyProfileCmt"><input  type="checkbox"fl-checkng-model="objProfileData.notificationSettings.taskCommentsCheck"ng-change="notificationsUpdated()"label="{{'Comments made on tasks' | translate}}"></div><div class="col-sm-8 pdb-22" ng-if="!exceptions.mfMyProfileEmail"><input  fl-labelplaceholder="{{'Email' | translate}}"maxlength="100"ng-model="objProfileData.notificationSettings.taskCommentsEmail"ng-disabled="!objProfileData.notificationSettings.taskCommentsCheck"ng-change="notificationsUpdated()"></div></div><div class="clearfix line"></div><div class="form-group"><h2 translate>Digital Signature</h2><div class="col-sm-12"><div class="digitalSignature" ng-if="!exceptions.upload"><sw-file-upload display-text="{{'Upload a scanned image of your signature to insert into documents and reports. Click here to upload.' | translate}}"height="200"width="650"path="/swapp/directives/"name="profilesignature"init-src="{{objProfileData.profilesignature}}"></sw-file-upload></div><div class="clearfix"></div><div class="col-sm-5" ng-if="objProfileData.sigAuthCount" ng-if="!exceptions.mfMyProfileYourSignatureLine"><a href="" ng-click="signatureAuthListPopup()"><span translate translate-n="1" translate-plural="{{objProfileData.sigAuthCount}} people can use your email signature"></span></a></div></div></div><div class="form-group" ng-if="objProfileData.digitalSigAuth"><h2 translate>Digital Signature Authority</h2><div class="col-sm-5"><div class="sw-selection-box"><div class="sw-selection-box-header"><translate>User List</translate></div><div ng-repeat="user in objProfileData.digitalSigAuth | filter:{ value: false }"ng-click="objProfileData.selectedUser=user"class="sw-selection-box-item"ng-class="{ 'selected': objProfileData.selectedUser === user }">{{user.user}}</div></div></div><div class="col-sm-2"><center><div ng-click="objProfileData.selectedUser.value=true;objProfileData.selectedUser=null;objProfileData.dsa_changed=1;"class="sw-selection-switch"><span class="glyphicon glyphicon-chevron-right"></span></div><br /><div ng-click="objProfileData.selectedUser.value=false;objProfileData.selectedUser=null;objProfileData.dsa_changed=1"class="mar-top-15 sw-selection-switch"><span class="glyphicon glyphicon-chevron-left"></span></div></center></div><div class="col-sm-5"><div class="sw-selection-box"><div class="sw-selection-box-header"><translate>Authorized Users</translate></div><div ng-repeat="user in objProfileData.digitalSigAuth | filter:{ value: true }"class="sw-selection-box-item"ng-click="objProfileData.selectedUser=user"ng-class="{ 'selected': objProfileData.selectedUser === user }">{{user.user}}</div></div></div></div><div class="clearfix line"></div><div ng-if="permissions.isSaveAllowed"><div class="col-sm-9"><div ng-if="form.$invalid || !form.$dirty"><div class="alert alert-danger"><p ng-show="form.$invalid && form.$error"><i class="glyphicon glyphicon-flash"></i><translate>We're almost there, please fix the above * required fields</translate></p><div ng-show="form.username.$touched && form.username.$invalid"><translate>* The "Username" field was left blank</translate></div><div ng-show="form.firstName.$touched && form.firstName.$invalid"><translate>* The "First Name" field was left blank</translate></div><div ng-show="form.lastName.$touched && form.lastName.$invalid"><translate>* The "Last Name" field was left blank</translate></div><div ng-show="form.email.$touched && form.email.$invalid"><translate>* The "Email" field was left blank or is invalid</translate></div></div></div></div><button class="sw-btn sw-btn--lg sw-btn--success pull-right"ng-click="onSaveProfileDataClick()"ng-disabled="form.$invalid || !form.$dirty"><i class="glyphicon glyphicon-floppy-disk mar-right-5"></i><translate>Save</translate></button></div></div></div></form>