define(["swapp"],function(e){e.registerFactory("httpFactory",function(e,r,t){function n(t,n,o,u){var s=r.defer();return e({method:t,url:n,data:o,withCredentials:!0,headers:u}).success(function(e){s.resolve(e)}).error(function(){s.reject()}),s.promise}function o(t,n){var o=r.defer(),u=new FormData;return u.append("foo",t),e.post(n,u,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){o.resolve(e)}).error(function(){o.reject()}),o.promise}function u(n,o,u){var s=r.defer();n=n.toLowerCase();var c=[o];if(n.match(/delete/)){if(u){var i=u;c.push(u)}e({method:"DELETE",url:o,data:i,headers:{"Content-Type":"application/json",Accept:"application/json"}}).success(function(e,r){"200"==r&&""==e&&(e=$rootScope.CONSTANT_SUCCESS),s.resolve(e)}).error(function(e,r){return t.error("delete error"),s.resolve("HTTP Error: "+r),"HTTP Error"+r})}else n.match(/post|put/)&&c.push(u),e[n].apply(null,c).success(function(e,r){"200"==r&&""==e&&(e=$rootScope.CONSTANT_SUCCESS),s.resolve(e)}).error(function(e,r){return s.resolve("HTTP Error: "+r),"HTTP Error"+r});return s.promise}return{get:function(e){return u("get",e)},post:function(e,r){return u("post",e,r)},put:function(e,r){return u("put",e,r)},"delete":function(e,r){return u("delete",e,r)},send:function(e,r,t,o){return n(e,r,t,o)},uploadFileToUrl:function(e,r){return o(e,r)}}})});