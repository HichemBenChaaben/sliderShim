define(["swapp"],function(l){l.registerDirective("flLabel",["$compile",function(l){return{restrict:"A",priority:1,require:"ngModel",link:function(e,r,a,t){function n(){r.addClass("js-field-has-value")}function f(){r.removeClass("js-field-has-value")}function s(){r.wrap('<label class="fl-frm__lbl '+o+'">').after(_).addClass(u).after('<span class="fl-frm__lbl-txt '+p+'">'+a.placeholder+"</span>").after(d)}function c(){e.$watch(function(){return t.$modelValue},function(l){n(),l||f()}),a.value&&a.value.length>0&&(n(),i()),r.bind("keypress keyup",function(l){e.chars=l.target.value.length,e.$apply(),i()}),r.bind("focusout blur",function(l){return i(),l.target.value.length>0?n():f()})}function i(){return a.required?t.$invalid?r.parent().addClass("fl-frm__lbl--error"):r.parent().removeClass("fl-frm__lbl--error"):void 0}var o="fl-frm__lbl--required",_="",u="fl-frm__el fl-frm__el--txt",p="",d="";if(e.$on("LanguageUpdated",function(){e.$apply()}),"TEXTAREA"===r[0].tagName&&(u="fl-frm__el fl-frm__el--area",p="fl-frm__lbl-txt fl-frm__lbl-txt--area"),a.required||(o=""),a.flIcon&&a.flIcon.length>0){var b=a.flIcon,d='<button type="button" ng-click="action()" class="fl-frm__lbl--btn"><span class="'+b+'"></span></button>';d=l(d)(e)}if(a.maxlength&&a.value){var m=a.maxlength,h="";e.chars=a.value.length,e.chars>=a.maxlength-5&&a.maxlength>10?r.parent().find("js-char-counter").addClass("js-char-counter-max"):r.parent().find("js-char-counter").removeClass("js-char-counter-max"),_='<span class="js-char-counter '+h+'"><span class="js-type">{{chars}}</span>/'+m+"</span>",_=l(_)(e)}s(),c()}}}]).registerDirective("flTip",function(){return{scope:!1,restrict:"A",priority:2,link:function(l,e,r){e.after('<span class="fl-frm__tooltip">'+r.flTip+"</span>")}}}).registerDirective("flSelect",function(l){return{restrict:"A",priority:1,require:"ngModel",link:function(e,r,a,t){var n='<span class="fl-frm__lbl-txt">'+a.flLead+'</span><span class="fl-frm__tooltip">'+a.flTip+"</span>";r.addClass("fl-frm__el fl-frm__el--sel").wrap('<label class="fl-frm__lbl fl-frm__sel-arrow fl-frm__lbl--required">').after(n),e.$watch(function(){return t.$modelValue},function(f){r.addClass("js-field-has-value"),e.firstSelected=t.$viewValue,n=a.flLead,n=l(n)(e)})}}}).registerDirective("flCheck",function(){return{restrict:"A",link:function(l,e,r){var a='<span class="fl-frm__lbl-txt--bool fl-frm__lbl-txt--bool--check"></span>',t='<span class="fl-frm__lbl-txt--bool__data-label">'+r.label+"</span>";e.addClass("fl-frm__el--bool").wrap('<label class="fl-frm__lbl fl-frm__lbl--bool">').after(t).after(a)}}}).registerDirective("flRadio",function(){return{priority:1,restrict:"A",link:function(l,e,r){var a='<span class="fl-frm__lbl-txt--bool fl-frm__lbl-txt--bool--radio"></span>',t='<span class="fl-frm__lbl-txt--bool__data-label">'+r.label+"</span>";e.addClass("fl-frm__el--bool").wrap('<label class="fl-frm__lbl fl-frm__lbl--bool">').after(t).after(a)}}}).registerDirective("flSwitch",function(){return{priority:1,restrict:"A",link:function(l,e,r){var a=function(l){return"undefined"==typeof l?"":l};r.uncheckedLabel=a(r.uncheckedLabel),r.checkedLabel=a(r.checkedLabel);var t='<span class="fl-frm__el--switch-wrapper">'+r.label+"</span>";e.addClass("fl-frm__el--switch").wrap('<label class="fl-frm__lbl fl-frm__lbl--switch" data-checked-text="'+r.checkedLabel+'" data-unchecked-text="'+r.uncheckedLabel+'">').after(t)}}})});