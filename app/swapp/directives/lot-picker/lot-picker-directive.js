"use strict";define(["swapp","socket-factory","ui-select","ui-bootstrap","lodash"],function(t){t.registerDirective("swLotPicker",["$rootScope","socket",function(t,e){return{templateUrl:"/swapp/directives/lot-picker/lot-picker.tpl.html",restrict:"E",replace:!0,require:"^ngModel",scope:{committee:"=ngModel"},link:function(i,r,n){i.committee={};var o={task_request:"Session/getTranslations",data:{language:t.userLoginDetailsVO.userLanguage,region:t.userLoginDetailsVO.regionId,displayPage:"dirLotPicker"}};e.get(o).then(function(t){i.translations=t.translations});var o={task_request:"Property/getLotOwners",data:{cts:i.$parent.propertySelected.cts}};e.get(o).then(function(t){i.units=t,i.filteredUnits=_.sortBy(t,"name")}),i.updateFilter=function(){i.filteredUnits=_.sortBy(_.filter(i.units,function(t){return-1!==t.name.toLowerCase().indexOf(i.committee.name.toLowerCase())}),"name")},i.selectUnit=function(e){i.committee=angular.copy(e),i.showUnitList=!1,t.$broadcast("lotPickerDirUpdateUnit",e)}}}}])});