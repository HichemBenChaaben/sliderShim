<form name="detailsForm" novalidate><div class="row"><div class="col-sm-8"><h4 class="modal-title" ng-if="modal.newPage"><translate>Add New</translate></h4><h4 class="modal-title" ng-if="!modal.newPage"><translate>Edit Waived Penalty</translate></h4></div><div class="col-sm-4"><button class="sw-btn sw-btn--subtle sw-btn--md pull-right" ng-click="cancel()"><i class="pull-left glyphicon glyphicon-remove pad-top-2 pad-right-5"></i><translate>Back</translate></button><button  class="sw-btn sw-btn--subtle sw-btn--md pull-right"ng-click="export('pdf')"ng-if="!modal.newPage"ng-show="permissions.isPrintAllowed"><i class="glyphicon glyphicon-print"></i><translate>Print</translate></button></div></div><div class="row"><div class="col-sm-12"><input requiredname="title"fl-labelplaceholder="{{'Title' | translate}}"ng-model="updateWaivedPenalties.title" /><div ng-messages="detailsForm.title.$touched && detailsForm.title.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-6"><label class="fl-frm__lbl"><input class="fl-frm__el fl-frm__el--txt"fl-labelplaceholder="{{'Recorded Date' | translate}}"datepicker-popup="{{$parent.dateFormat}}"date-disabled="disabled(date)"ng-model="updateWaivedPenalties.rdate"max-date="{{tomorrow}}"is-open="isDateOpened"close-text="{{pageTranslations.close}}"ng-click="isDateOpened = true;"ng-focus="isDateOpened = true;" /><button type="button" ng-click="isDateOpened=!isDateOpened;$event.preventDefault();$event.stopPropagation();" class="fl-frm__lbl--btn"><i class="glyphicon glyphicon-calendar"></i></button></label></div><div class="col-sm-12" dropdown is-open="addressPickerOpenStatus.isopen"><label class="fl-frm__lbl"><input requiredfl-labelname="partyname"placeholder="{{'Name' | translate}}"ng-model="updateWaivedPenalties.partyname" /><button type="button" class="fl-frm__lbl--btn dropdown-toggle"ng-click="toggleDropdown($event)"><i class="glyphicon glyphicon-user"></i></button></label><ul class="dropdown-menu col-sm-6 pull-right sw-address-book-dropdown" role="menu" ng-click="$event.stopPropagation();"><li class="col-sm-12 pull-right"><sw-address-book-picker address-book-options = "{{addressBookConfig}}"ng-model="updateWaivedPenalties.partyname"model-base="updateWaivedPenalties"model-sub="partyname"></sw-address-book-picker></li></ul><div ng-messages="detailsForm.partyname.$touched && detailsForm.partyname.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-12"><input requiredminleght="3"name="partyaddress"fl-labelplaceholder="{{'Street Address' | translate}}"ng-model="updateWaivedPenalties.partyaddress" /><div ng-messages="detailsForm.partyaddress.$touched && detailsForm.partyaddress.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-12"><div class="row"><div class="col-sm-8"><sw-suburb-state unique-id="address1"placeholder="{{'Emirate' | translate}}"ng-model="updateWaivedPenalties.partysuburb"></sw-suburb-state></div><div class="col-sm-4"><sw-post-codes unique-id="address1"placeholder="{{'Area' | translate}}"ng-model="updateWaivedPenalties.partypostc"></sw-post-codes></div></div></div><div class="col-sm-6"><input fl-labelplaceholder="{{'Phone Number' | translate}}"fl-tip="{{'Exp: +971 55 719 0116' | translate}}"ng-model="updateWaivedPenalties.partyphone" /></div><div class="col-sm-6"><label class="fl-frm__lbl"><input class="fl-frm__el fl-frm__el--txt"fl-labelplaceholder="{{'Resolution Date' | translate}}"datepicker-popup="{{$parent.dateFormat}}"date-disabled="disabled(date)"ng-model="updateWaivedPenalties.resdate"max-date="{{tomorrow}}"is-open="isDateToOpened"close-text="{{pageTranslations.close}}"ng-click="isDateToOpened = true;"ng-focus="isDateToOpened = true;" /><button type="button" ng-click="isDateToOpened=!isDateToOpened;$event.preventDefault();$event.stopPropagation();" class="fl-frm__lbl--btn"><i class="glyphicon glyphicon-calendar"></i></button></label></div><div class="col-sm-12"><input fl-labelplaceholder="{{'Resolution' | translate}}"ng-model="updateWaivedPenalties.resolution" /></div><div class="col-sm-12"><textarea requiredname="note"fl-labelplaceholder="{{'Notes' | translate}}"ng-model="updateWaivedPenalties.note"rows="8"></textarea><div ng-messages="detailsForm.note.$touched && detailsForm.note.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div></div><div ng-if="permissions.isSaveAllowed" class="row"><div class="col-sm-9"><div ng-show="detailsForm.$dirty && detailsForm.$invalid"><div class="alert alert-danger"><p ng-show="detailsForm.$invalid && detailsForm.$error"><i class="glyphicon glyphicon-flash"></i><translate>We're almost there, please fix the above * required fields</translate></p><div ng-show="detailsForm.title.$touched && detailsForm.title.$invalid"><translate>* We need a title for the waived penalty entry</translate></div><div ng-show="detailsForm.partyname.$touched && detailsForm.partyname.$invalid"><translate>* We need a party name</translate></div><div ng-show="detailsForm.partyaddress.$touched && detailsForm.partyaddress.$invalid"><translate>* We need a party address</translate></div><div ng-show="detailsForm.note.$touched && detailsForm.note.$invalid"><translate>* Please add a note</translate></div></div></div></div><div class="col-sm-3"><a class="sw-btn sw-btn--lg sw-btn--success pull-right mar-top-15"ng-click="saveWaivedPenalties(detailsForm.$valid);resetForm(detailsForm);"ng-disabled="detailsForm.$invalid || !detailsForm.$dirty"><i class="glyphicon glyphicon-floppy-disk mar-right-5"></i><translate>Save</translate></a></div></div></form>