<div class="row" ng-switch on="newform"><div class="col-sm-12"><div class="row"><div class="col-sm-8"><h4 class="modal-title" ng-if="modal.isNewPage"><translate>Add New</translate></h4><h4 class="modal-title" ng-if="!modal.isNewPage"><translate>Edit</translate></h4></div><div class="col-sm-4"><button class="sw-btn sw-btn--subtle sw-btn--md pull-right" ng-click="$parent.toggleOverlay(); modal.isNewPage = false;resetForm();"><i class="pull-left glyphicon glyphicon-remove pad-top-2 pad-right-5"></i><translate>Back</translate></button><button class="sw-btn sw-btn--subtle sw-btn--md pull-right"ng-click="$parent.toggleOverlay(); modal.isNewPage = false;"ng-if="!modal.isNewPage && permissions.isPrintAllowed"><i class="pull-left glyphicon glyphicon-print pad-top-2 pad-right-5"></i><translate>Print</translate></button></div></div></div></div><div class="row"><form name="detailsForm"  novalidate><div class="col-sm-12"><div class="row"><div class="col-sm-12"><input requiredfl-labelname="title"placeholder="{{'Title of complaint' | translate}}"ng-model="updateComplaints.title"></input><div ng-messages="detailsForm.title.$touched && detailsForm.title.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-6"><label class="fl-frm__lbl"><input class="fl-frm__el fl-frm__el--txt"fl-labelrequiredminlength="5"name="rdate"placeholder="{{'Recorded Date' | translate}}"datepicker-popup="{{$parent.dateFormat}}"date-disabled="disabled(date)"ng-model="updateComplaints.rdate"max-date="{{tomorrow}}"is-open="isDateOpened"close-text="{{'Close' | translate}}"current-text="{{'Today'| translate}}"clear-text="{{'Clear' | translate}}"ng-click="isDateOpened = true;"ng-focus="isDateOpened = true;"/><button type="button"ng-click="isDateOpened=!isDateOpened;$event.preventDefault();$event.stopPropagation();"class="fl-frm__lbl--btn"><i class="glyphicon glyphicon-calendar"></i></button></label><div ng-messages="detailsForm.rdate.$dirty && detailsForm.rdate.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-6"><select ng-model="updateComplaints.ntype"fl-selectrequiredname="ntype"placeholder="{{'Complaint Type' | translate}}"fl-lead="{{'Complaints Type' | translate}}"fl-tip="{{'Complaints Type' | translate}}"><option ng-repeat="item in ntypeList"value="{{item.title}}"ng-selected="{{item.title === updateComplaints.ntype}}">{{item.title}}</option></select><div ng-messages="detailsForm.ntype.$touched && detailsForm.ntype.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-12" dropdown is-open="addressPickerOpenStatus.isopen"><label class="fl-frm__lbl"><input fl-labelplaceholder="{{'Complaints Name' | translate}}"value="{{updateComplaints.partyname}}"ng-model="updateComplaints.partyname" /><button type="button" class="fl-frm__lbl--btn dropdown-toggle"ng-click="toggleDropdown($event)"><i class="glyphicon glyphicon-user"></i></button></label><ul class="dropdown-menu col-sm-6 pull-right sw-address-book-dropdown"role="menu"ng-click="$event.stopPropagation();"><li class="col-sm-12 pull-right"><sw-address-book-picker address-book-options = "{{addressBookConfig}}"ng-model="updateComplaints.partyname"model-base="updateComplaints"model-sub="partyname"></sw-address-book-picker></li></ul></div><div class="col-sm-12"><input requiredfl-labelname="partyaddress"placeholder="{{'Street Address' | translate}}"value="{{updateComplaints.partyaddress}}"ng-model="updateComplaints.partyaddress" /><div ng-messages="detailsForm.partyaddress.$touched && detailsForm.partyaddress.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-12"><div class="row"><div class="col-sm-8"><sw-suburb-state unique-id="address1"placeholder="{{'Emirate' | translate}}"ng-model="updateComplaints.partysuburb"></sw-suburb-state></div><div class="col-sm-4"><sw-post-codes unique-id="address1"placeholder="{{'Area' | translate}}"ng-model="updateComplaints.partypostc"></sw-post-codes></div></div></div><div class="col-sm-12"><input fl-labeltype="tel"fl-tip="Exp: +971 55 719 0116"placeholder="{{'Phone' | translate}}"ng-model="updateComplaints.partyphone" /></div><div class="col-sm-12"><div class="row"><div class="col-sm-3"><input type="radio"fl-radiong-model="updateComplaints.status"value="Impending"data-label="{{'Impending' | translate}}"/></div><div class="col-sm-3"><input type="radio"ng-model="updateComplaints.status"value="Current"fl-radiodata-label="{{'Current' | translate}}"/></div><div class="col-sm-3"><input type="radio"ng-model="updateComplaints.status"value="More Information"fl-radiodata-label="{{'More Information' | translate}}"/></div><div class="col-sm-3"><input type="radio"ng-model="updateComplaints.status"value="Resolved"fl-radiodata-label="{{'Resolved' | translate}}"/></div></div></div><div class="col-sm-6"><label class="fl-frm__lbl"><input class="fl-frm__el fl-frm__el--txt"fl-labelrequiredminlength="5"name="resdate"placeholder="{{'Resolution Date' | translate}}"datepicker-popup="{{$parent.dateFormat}}"date-disabled="disabled(date)"ng-model="updateComplaints.resdate"max-date="{{tomorrow}}"is-open="isDateToOpened"close-text="{{'Close' | translate}}"current-text="{{'Today'| translate}}"clear-text="{{'Clear' | translate}}"ng-click="isDateToOpened = true;"ng-focus="isDateToOpened = true;" /><button type="button" ng-click="isDateToOpened=!isDateToOpened;$event.preventDefault();$event.stopPropagation();" class="fl-frm__lbl--btn"><i class="glyphicon glyphicon-calendar"></i></button></label><div ng-messages="detailsForm.resdate.$dirty && detailsForm.resdate.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-6"><input fl-labelrequiredname="resolution"placeholder="{{'Complaint Resolution' |  translate}}"value="{{updateComplaints.resolution}}"ng-model="updateComplaints.resolution" /><div ng-messages="detailsForm.resolution.$touched && detailsForm.resolution.$error"ng-messages-include="/swapp/common-partials/form-errors.html"></div></div><div class="col-sm-12"><textarea fl-labelplaceholder="{{'Complaints Notes' | translate}}"ng-model="updateComplaints.note"rows="8"></textarea></div></div></div></form></div><div class="row"><div class="col-sm-9 pull-left mar-top-15"><div ng-show="detailsForm.$dirty && detailsForm.$invalid"><div class="alert alert-danger"><p ng-show="detailsForm.$invalid && detailsForm.$error"><i class="glyphicon glyphicon-flash"></i><translate>We're almost there, please fix the above * required fields</translate></p><div ng-show="detailsForm.title.$touched && detailsForm.title.$invalid"><translate>* We need a title for this complaint</translate></div><div ng-show="detailsForm.rdate.$touched && detailsForm.rdate.$invalid"><translate>* We need a valid recorded date</translate></div><div ng-show="detailsForm.ntype.$touched && detailsForm.ntype.$invalid"><translate>* Please select a complaint type</translate></div><div ng-show="detailsForm.partyaddress.$touched && detailsForm.partyaddress.$invalid"><translate>* We need a party address</translate></div><div ng-show="detailsForm.resdate.$touched && detailsForm.resdate.$invalid"><translate>* We need a valid resoution date</translate></div><div ng-show="detailsForm.resolution.$touched && detailsForm.resolution.$invalid"><translate>* We need a complaint resoution description </translate></div></div></div></div><div class="col-sm-3"><a class="sw-btn sw-btn--lg sw-btn--success pull-right mar-top-15"ng-disabled="detailsForm.$invalid || !detailsForm.$dirty"ng-click="saveComplaints(detailsForm.$valid)"><i class="glyphicon glyphicon-floppy-disk mar-right-5"></i><translate>Save</translate></a></div></div>